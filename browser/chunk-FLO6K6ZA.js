import{b as R,c as m,d as Z,e as Q,g as J,i as K,j as W,k as X,o as ee,q as te}from"./chunk-XPUYCRUD.js";import{a as ie}from"./chunk-FA34UKES.js";import{C as u,E as h,G as p,I as P,J as D,K as G,L as t,La as Y,M as e,Ma as H,N as c,O as $,P as M,Q as I,R as i,S as E,T as g,fa as j,ga as V,j as N,m as w,ma as z,o as O,p as A,pa as L,ra as U,u as q,v as l,wa as B,x as S,y as T}from"./chunk-OO7MTYIC.js";var F=class n{constructor(o){this.http=o}apiUrl="http://localhost:3000/orders";placeOrder(o){return this.http.post(this.apiUrl,o)}getOrderById(o){return this.http.get(`${this.apiUrl}/${o}`)}static \u0275fac=function(r){return new(r||n)(w(V))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function ae(n,o){if(n&1&&(t(0,"div",2)(1,"div",3),c(2,"i-lucide",4),e(),t(3,"h1",5),i(4,"Thank you for your order!"),e(),t(5,"p",6),i(6,"Your order has been placed successfully."),e(),t(7,"a",7),i(8," Continue Shopping "),e()()),n&2){let r=I();l(2),h("name",r.checkIcon)}}function le(n,o){n&1&&(t(0,"p",17),i(1,"First name is required"),e())}function de(n,o){n&1&&(t(0,"p",17),i(1,"Last name is required"),e())}function me(n,o){n&1&&(t(0,"p",17),i(1,"Please enter a valid email address"),e())}function ce(n,o){n&1&&(t(0,"p",17),i(1,"Address is required"),e())}function ue(n,o){n&1&&(t(0,"p",17),i(1,"City is required"),e())}function pe(n,o){n&1&&(t(0,"p",17),i(1,"State is required"),e())}function se(n,o){n&1&&(t(0,"p",17),i(1,"Please enter a valid ZIP code"),e())}function fe(n,o){n&1&&(t(0,"p",17),i(1,"Name on card is required"),e())}function ge(n,o){n&1&&(t(0,"p",17),i(1,"Please enter a valid 16-digit card number"),e())}function he(n,o){n&1&&(t(0,"p",17),i(1,"Please enter a valid expiry date (MM/YY)"),e())}function xe(n,o){n&1&&(t(0,"p",17),i(1,"Please enter a valid CVV"),e())}function be(n,o){if(n&1&&(t(0,"div",51)(1,"div",56),c(2,"img",57),e(),t(3,"div",58)(4,"h3",59),i(5),e(),t(6,"p",60),i(7),e()(),t(8,"div",59),i(9),e()()),n&2){let r=o.$implicit;l(2),h("src",r.product.imageUrl,q)("alt",r.product.name),l(3),E(r.product.name),l(2),g("Qty: ",r.quantity,""),l(2),g(" $",((r.product.discountPrice||r.product.price)*r.quantity).toFixed(2)," ")}}function ve(n,o){if(n&1){let r=$();t(0,"h1",8),i(1,"Checkout"),e(),t(2,"div",9)(3,"div",10)(4,"form",11),M("ngSubmit",function(){O(r);let f=I();return A(f.onSubmit())}),t(5,"div",12)(6,"h2",13),i(7,"Personal Information"),e(),t(8,"div",14)(9,"div")(10,"label",15),i(11,"First Name"),e(),c(12,"input",16),u(13,le,2,0,"p",17),e(),t(14,"div")(15,"label",18),i(16,"Last Name"),e(),c(17,"input",19),u(18,de,2,0,"p",17),e()(),t(19,"div",20)(20,"label",21),i(21,"Email Address"),e(),c(22,"input",22),u(23,me,2,0,"p",17),e()(),t(24,"div",23)(25,"h2",13),i(26,"Shipping Address"),e(),t(27,"div",24)(28,"label",25),i(29,"Street Address"),e(),c(30,"input",26),u(31,ce,2,0,"p",17),e(),t(32,"div",27)(33,"div")(34,"label",28),i(35,"City"),e(),c(36,"input",29),u(37,ue,2,0,"p",17),e(),t(38,"div")(39,"label",30),i(40,"State"),e(),c(41,"input",31),u(42,pe,2,0,"p",17),e(),t(43,"div")(44,"label",32),i(45,"ZIP Code"),e(),c(46,"input",33),u(47,se,2,0,"p",17),e()()(),t(48,"div",34)(49,"h2",13),i(50,"Payment Information"),e(),t(51,"div",24)(52,"label",35),i(53,"Name on Card"),e(),c(54,"input",36),u(55,fe,2,0,"p",17),e(),t(56,"div",24)(57,"label",37),i(58,"Card Number"),e(),t(59,"div",38),c(60,"input",39),t(61,"div",40),c(62,"i-lucide",41),e()(),u(63,ge,2,0,"p",17),e(),t(64,"div",42)(65,"div")(66,"label",43),i(67,"Expiry Date"),e(),c(68,"input",44),u(69,he,2,0,"p",17),e(),t(70,"div")(71,"label",45),i(72,"CVV"),e(),c(73,"input",46),u(74,xe,2,0,"p",17),e()()(),t(75,"button",47),i(76," Place Order "),e()()(),t(77,"div",48)(78,"div",49)(79,"h2",13),i(80,"Order Summary"),e(),t(81,"div",50),D(82,be,10,5,"div",51,P),e(),t(84,"div",52)(85,"div",53)(86,"span",54),i(87,"Subtotal"),e(),t(88,"span"),i(89),e()(),t(90,"div",53)(91,"span",54),i(92,"Tax (8%)"),e(),t(93,"span"),i(94),e()(),t(95,"div",53)(96,"span",54),i(97,"Shipping"),e(),t(98,"span"),i(99),e()(),t(100,"div",55)(101,"span"),i(102,"Total"),e(),t(103,"span"),i(104),e()()()()()()}if(n&2){let r,s,f,d,x,b,v,y,C,_,k,a=I();l(4),h("formGroup",a.checkoutForm),l(9),p((r=a.checkoutForm.get("personalInfo.firstName"))!=null&&r.invalid&&((r=a.checkoutForm.get("personalInfo.firstName"))!=null&&r.touched)?13:-1),l(5),p((s=a.checkoutForm.get("personalInfo.lastName"))!=null&&s.invalid&&((s=a.checkoutForm.get("personalInfo.lastName"))!=null&&s.touched)?18:-1),l(5),p((f=a.checkoutForm.get("personalInfo.email"))!=null&&f.invalid&&((f=a.checkoutForm.get("personalInfo.email"))!=null&&f.touched)?23:-1),l(8),p((d=a.checkoutForm.get("shippingAddress.address"))!=null&&d.invalid&&((d=a.checkoutForm.get("shippingAddress.address"))!=null&&d.touched)?31:-1),l(6),p((x=a.checkoutForm.get("shippingAddress.city"))!=null&&x.invalid&&((x=a.checkoutForm.get("shippingAddress.city"))!=null&&x.touched)?37:-1),l(5),p((b=a.checkoutForm.get("shippingAddress.state"))!=null&&b.invalid&&((b=a.checkoutForm.get("shippingAddress.state"))!=null&&b.touched)?42:-1),l(5),p((v=a.checkoutForm.get("shippingAddress.zipCode"))!=null&&v.invalid&&((v=a.checkoutForm.get("shippingAddress.zipCode"))!=null&&v.touched)?47:-1),l(8),p((y=a.checkoutForm.get("paymentInfo.cardName"))!=null&&y.invalid&&((y=a.checkoutForm.get("paymentInfo.cardName"))!=null&&y.touched)?55:-1),l(7),h("name",a.creditCardIcon),l(),p((C=a.checkoutForm.get("paymentInfo.cardNumber"))!=null&&C.invalid&&((C=a.checkoutForm.get("paymentInfo.cardNumber"))!=null&&C.touched)?63:-1),l(6),p((_=a.checkoutForm.get("paymentInfo.expiryDate"))!=null&&_.invalid&&((_=a.checkoutForm.get("paymentInfo.expiryDate"))!=null&&_.touched)?69:-1),l(5),p((k=a.checkoutForm.get("paymentInfo.cvv"))!=null&&k.invalid&&((k=a.checkoutForm.get("paymentInfo.cvv"))!=null&&k.touched)?74:-1),l(8),G(a.cartItems),l(7),g("$",a.subtotal.toFixed(2),""),l(5),g("$",a.tax.toFixed(2),""),l(5),E(a.shipping===0?"Free":"$"+a.shipping.toFixed(2)),l(5),g("$",a.total.toFixed(2),"")}}var ne=class n{constructor(o,r,s){this.cartService=o;this.orderService=r;this.fb=s;this.checkoutForm=this.fb.group({personalInfo:this.fb.group({firstName:["",[m.required]],lastName:["",[m.required]],email:["",[m.required,m.email]]}),shippingAddress:this.fb.group({address:["",[m.required]],city:["",[m.required]],state:["",[m.required]],zipCode:["",[m.required,m.pattern(/^\d{5}(-\d{4})?$/)]]}),paymentInfo:this.fb.group({cardName:["",[m.required]],cardNumber:["",[m.required,m.pattern(/^\d{16}$/)]],expiryDate:["",[m.required,m.pattern(/^(0[1-9]|1[0-2])\/\d{2}$/)]],cvv:["",[m.required,m.pattern(/^\d{3,4}$/)]]})})}cartItems=[];checkoutForm;orderPlaced=!1;creditCardIcon=B;checkIcon=U;cartSubscription=null;ngOnInit(){this.cartSubscription=this.cartService.cartItems$.subscribe(o=>{this.cartItems=o})}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}get subtotal(){return this.cartItems.reduce((o,r)=>{let s=r.product.discountPrice||r.product.price;return o+s*r.quantity},0)}get tax(){return this.subtotal*.08}get shipping(){return this.subtotal>100?0:10}get total(){return this.subtotal+this.tax+this.shipping}get itemCount(){return this.cartItems.reduce((o,r)=>o+r.quantity,0)}onSubmit(){if(this.checkoutForm.valid){let o=this.cartItems.map(d=>({productId:d.product.id,productName:d.product.name,quantity:d.quantity,unitPrice:d.product.discountPrice||d.product.price,subtotal:(d.product.discountPrice||d.product.price)*d.quantity})),r={fullName:`${this.checkoutForm.get("personalInfo.firstName")?.value} ${this.checkoutForm.get("personalInfo.lastName")?.value}`,streetAddress:this.checkoutForm.get("shippingAddress.address")?.value,city:this.checkoutForm.get("shippingAddress.city")?.value,state:this.checkoutForm.get("shippingAddress.state")?.value,zipCode:this.checkoutForm.get("shippingAddress.zipCode")?.value,country:"United States",phoneNumber:"",isDefault:!1},s={type:"creditCard",cardNumber:this.checkoutForm.get("paymentInfo.cardNumber")?.value,nameOnCard:this.checkoutForm.get("paymentInfo.cardName")?.value,expirationDate:this.checkoutForm.get("paymentInfo.expiryDate")?.value,cvv:this.checkoutForm.get("paymentInfo.cvv")?.value},f={id:0,items:o,shippingAddress:r,billingAddress:r,paymentMethod:s,subtotal:this.subtotal,shippingCost:this.shipping,tax:this.tax,total:this.total,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.orderService.placeOrder(f).subscribe({next:d=>{console.log("Order placed successfully",d),this.cartService.clearCart(),this.orderPlaced=!0},error:d=>{console.error("Error placing order",d)}})}else this.markFormGroupTouched(this.checkoutForm)}markFormGroupTouched(o){Object.values(o.controls).forEach(r=>{r.markAsTouched(),r.controls&&this.markFormGroupTouched(r)})}static \u0275fac=function(r){return new(r||n)(S(ie),S(F),S(ee))};static \u0275cmp=T({type:n,selectors:[["app-checkout"]],decls:4,vars:1,consts:[[1,"bg-gray-50","min-h-screen","py-8","px-4"],[1,"max-w-6xl","mx-auto"],[1,"bg-white","rounded-lg","shadow-sm","p-8","text-center"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"w-8","h-8","text-green-600",3,"name"],[1,"text-2xl","font-medium","mb-2"],[1,"text-gray-600","mb-6"],["routerLink","/",1,"bg-gray-900","text-white","px-6","py-2","rounded-lg","inline-block","hover:bg-black","transition-colors"],[1,"text-2xl","font-medium","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2"],[1,"bg-white","rounded-lg","shadow-sm","p-6",3,"ngSubmit","formGroup"],["formGroupName","personalInfo",1,"mb-6"],[1,"text-lg","font-medium","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","firstName","formControlName","firstName",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],[1,"text-red-500","text-xs","mt-1"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","lastName","formControlName","lastName",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],[1,"mt-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","email","id","email","formControlName","email",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],["formGroupName","shippingAddress",1,"mb-6"],[1,"mb-4"],["for","address",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","address","formControlName","address",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["for","city",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","city","formControlName","city",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],["for","state",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","state","formControlName","state",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],["for","zipCode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","zipCode","formControlName","zipCode",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],["formGroupName","paymentInfo",1,"mb-6"],["for","cardName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","cardName","formControlName","cardName",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],["for","cardNumber",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"relative"],["type","text","id","cardNumber","formControlName","cardNumber","placeholder","1234 5678 9012 3456",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900","pl-10"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"w-4","h-4","text-gray-400",3,"name"],[1,"grid","grid-cols-2","gap-4"],["for","expiryDate",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","expiryDate","formControlName","expiryDate","placeholder","MM/YY",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],["for","cvv",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","cvv","formControlName","cvv","placeholder","123",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-gray-900"],["type","submit",1,"w-full","bg-gray-900","text-white","py-3","rounded-md","hover:bg-black","transition-colors"],[1,"lg:col-span-1"],[1,"bg-white","rounded-lg","shadow-sm","p-6","sticky","top-6"],[1,"mb-4","max-h-60","overflow-y-auto"],[1,"flex","items-center","py-2","border-b","border-gray-100","last:border-0"],[1,"border-t","border-gray-200","pt-4"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"flex","justify-between","font-medium","text-lg","mt-4","pt-4","border-t","border-gray-200"],[1,"w-12","h-12","rounded","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"ml-3","flex-grow"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-500"]],template:function(r,s){r&1&&(t(0,"div",0)(1,"div",1),u(2,ae,9,1,"div",2)(3,ve,105,17),e()()),r&2&&(l(2),p(s.orderPlaced?2:3))},dependencies:[j,L,z,te,J,R,Z,Q,K,X,W,H,Y],encapsulation:2})};export{ne as CheckoutComponent};
